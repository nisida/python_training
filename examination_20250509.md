{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "9623ccb6",
   "metadata": {},
   "source": [
    "### __【問題１】素数__\n",
    "\n",
    "以下のようなコードは、簡単に言うと、正の整数y が素数であるか否かを確かめるコードです。\n",
    "\n",
    "```python\n",
    "# x = y / 2 # y は1 より大きい整数\n",
    "while x > 1:\n",
    "    if y % x == 0: # 余りが0 かを確かめる\n",
    "        print (y, 'has factor' , x)\n",
    "        break # else ブロックは実行しない\n",
    "    x = x-1\n",
    "else: # break が実行されなければelse ブロックを実行\n",
    "    print(y, 'is prime')\n",
    "```\n",
    "\n",
    "上記のコードをモジュールファイルに入力し、関数に改造してください。それができたら、関数のコー\n",
    "ドの後に、関数を呼び出すためのコードをいくつか追加します。コードの実行後は、浮動小数点数が\n",
    "引数として指定された場合にも対応できるよう、引数が負の数、0あるいは1であった場合に対応する\n",
    "にはどうすればよいか、関数の実行速度を上げるにはどうすればよいか、といったことについても考え\n",
    "てみてください。関数の実行結果は、以下のようなものになるはずです。\n",
    "\n",
    "```shell\n",
    "13 is prime\n",
    "13.0 is prime\n",
    "15 has factor 5\n",
    "15.0 has factor 5.0\n",
    "```\n",
    "\n",
    "### __【問題２】　簡単なモジュールファイルのインポート__\n",
    "\n",
    "「指定のファイルに含まれる行数、文字数をカウントする」という機能を備えたプログラム（UNIX\n",
    "のwc と同じようなものです）を作成してください。プログラムのコードは、テキストエディタ(vscode)を使\n",
    "用し、mymod.py というモジュールファイルに入力します。このモジュールファイルは、次の3 つの\n",
    "属性（関数）を持つものにします。\n",
    "\n",
    "#### countLines(name)　：\n",
    "引数に名前を指定されたファイルの内容を読み取り、中に含まれる行の数をカウントする関数で\n",
    "す（ヒント：file.readlines メソッドとlen 関数を使用すれば、主な処理のほとんどは自動\n",
    "的に行われます）。\n",
    "#### countChars(name)　：\n",
    "引数に名前を指定されたファイルの内容を読み取り、中に含まれる文字の数をカウントする関数\n",
    "です（ヒント：ファイル全体の内容を1つの文字列として戻すfile.readメソッドを使用します）。\n",
    "#### test(name)　：\n",
    "上記2 つの関数を呼び出す関数です。この関数の引数として指定されたファイル名が、そのまま\n",
    "2 つの関数の引数として使用されます。ファイル名は、raw_input 関数やsys.argv 属性を利用\n",
    "すれば、プログラム実行時にユーザに入力させることもできます。ただ、ここでは、関数を呼び\n",
    "出すコードの中で指定できればよい、ということにします。　　\n",
    "\n",
    "\n",
    "\n",
    "3つの関数の引数はいずれも「ファイル名（文字列）」です。どの関数も、2、3 行のコードを書けば\n",
    "できるはずです。ヒントの部分もよく読むようにしてください。\n",
    "モジュールファイルができたらVSCodeのセルで機能を確認します。まずモジュールを\n",
    "importステートメントでインポートし、\".\"を使用した形式でそれぞれの関数を呼び出します。場合\n",
    "によっては、mymod.pyモジュールの置かれているディレクトリをPYTHONPATH変数に指定しなけれ\n",
    "ばならない場合もあります。test(\"mymod.py\") のように、mymod.pyモジュール自身を引数とした\n",
    "場合にどうなるかも確認してください。おそらくtest関数は、結果的にopen関数を2回呼び出すよ\n",
    "うなものになる（しかも2回とも同じファイルを引数にすることになる）と思いますが、意欲があれば、\n",
    "open関数の呼び出しが1回で済むように改良してみてください（ヒント：test関数を、「まずopen\n",
    "関数を呼び出し、戻り値として得られるファイルオブジェクトを引数にして2 つの関数を呼び出す」\n",
    "というものにします。2 つの関数の中では、file.seek(0) と書けばファイルの先頭からアクセスす\n",
    "ることができます）。\n",
    "\n",
    "### __【問題３】　リストの機能のオーバーロード__\n",
    "\n",
    "ビルトインオブジェクトである「リスト」をインスタンス属性の値として組み込み、リストの機能を\n",
    "オーバーロードするクラスMylist を作成してください。このクラスには、リストの持つ、+ 演算、\n",
    "インデクシング、反復処理、スライシング、メソッド（例：append、sort）などの機能を持たせます。\n",
    "その他、リストにどのような機能があるかは、Python のリファレンスマニュアルで調べてください。\n",
    "\n",
    "Mylist クラスには、リストの機能をオーバーロードするためのメソッドに加え、インスタンス作成\n",
    "時にリストをインスタンス属性の値として組み込むための__init__メソッドも必要です。Mylist\n",
    "クラスの「呼び出し」時に引数に指定されたリストをインスタンス属性にコピーするようにしてもよ\n",
    "いでしょう。Mylist クラスのコードが書けたら、VSCodeのセルで機能を確かめます。この\n",
    "演習では、特に次の点についてよく考えるようにしてください。\n",
    "\n",
    "1. インスタンス作成時に引数に指定されたリストを、インスタンス属性にそのまま代入せず「コピー」するのはなぜか。\n",
    "2. リストをインスタンス属性にコピーするのに、インデックスを指定しないスライシングのコード（start[:] など）は使用できるか。\n",
    "3. 1 つのフックメソッドでリストの複数のメソッドに対応する、ということはできるか。\n",
    "4. Mylist + <リスト> あるいは<リスト> + Mylist という演算はできるか。\n",
    "5. Mylist を使った+ 演算、スライシング、インデクシングでは、結果としてどのようなオブジェクトが得られるようにすべきか。\n",
    "\n",
    "### __【問題４】　コンポジション__\n",
    "\n",
    "ファーストフード店をシミュレートするプログラムを作ります。このプログラムは、以下の4つのク\n",
    "ラスから構成されるものとします。なお、このプログラムはコマンドラインから実行し、引数に商品名を\n",
    "渡すことにする。\n",
    "\n",
    "#### Lunch　：\n",
    "他のクラスの「コンテナ」、「コントローラ」として機能するクラス\n",
    "#### Customer　：\n",
    "商品を購入する「顧客」に対応するクラス\n",
    "#### Employee\n",
    "顧客からの注文を受ける「従業員」に対応するクラス\n",
    "#### Food　：\n",
    "顧客が購入する「商品」に対応するクラス\n",
    "\n",
    "ヒントとして、以下に、それぞれのクラスに持たせるべきメソッドを示しておきます。\n",
    "\n",
    "```python\n",
    "class Lunch:\n",
    "   def __init__(self) # Customer、Employee のインスタンスを組み込む\n",
    "   def order(self, foodName) # 顧客による「注文」のシミュレーションを開始する\n",
    "   def result(self) # 顧客が購入した商品の名前を出力する\n",
    "\n",
    "class Customer:\n",
    "   def __init__(self) # 「顧客」を初期化して商品購入前の状態にする\n",
    "   def placeOrder(self, foodName, employee) # Employee に商品を注文する\n",
    "   def printFood(self) # 購入した商品の名前を出力する\n",
    "\n",
    "class Employee:\n",
    "    def takeOrder(self, foodName) # 注文された商品の名前を属性として持つ\n",
    "\n",
    "# Food インスタンスを戻す\n",
    "class Food:\n",
    "    def __init__(self, name) # 注文された商品の名前を保持する\n",
    "```\n",
    "\n",
    "1. まず、Lunchクラスのインスタンスを作る。その際、Lunchクラスの__init__メソッド（コンストラクタ）では、CustomerクラスとEmployeeクラスのインスタンスが作られ、Lunchのインスタンス属性の値として組み込まれる。次に、Lunchのインスタンスを使用してorderメソッドを呼び出す。orderメソッドの中では、__init__で組み込んだCustomerのインスタンスを使用し、placeOrderメソッドが呼び出される。orderメソッドは、店での商品の受注をシミュレーションするためのメソッドで、引数としては注文される商品名を指定する。orderメソッドから呼び出されるplaceOrderメソッドでは、さらにEmployeeクラスのtakeOrderメッドが呼び出される。\n",
    "\n",
    "2. takeOrderメソッドはFoodクラスのインスタンスを戻すが、このインスタンスは、注文された商品の名前（“burritos”など）を属性として保持する。この商品名は、Customer.placeOrderからEmployee.takeOrder、そしてFood クラスのコンストラクタ（__init__メソッド）へと渡される。商品名がFoodのインスタンに保持されたら、次はLunchクラスのresultメソッドを呼び出す。このメソッドでは、CustomerクラスのprintFoodメソッドが呼び出される。printFoodメソッドでは、takeOrderメソッドの戻り値として受け取ったFood インスタンスを利用して、注文された商品の名前を出力する（resultメソッドはプログラムが正しく能しているかをテストするためのメソッドとしても使える）。\n",
    "\n",
    "\n",
    "\n",
    "Lunchクラスのコードでは、Customerのインスタンスに、Lunch自身のインスタンスとともに\n",
    "Employeeのインスタンスを渡さねばならない、という点に注意してください。これは、Customer\n",
    "からさらにEmployee のメソッドを呼び出すことになるからです。\n",
    "4つのクラスができたら、VSCodeのセルで実行し、機能を確認します。その際は、まず、ク\n",
    "ラス名Lunchをモジュールからインポートして、Lunch のインスタンスを作成し、次に、引数に商\n",
    "品名を指定してorderメソッドを呼び出します。それができたら、resultメソッドを呼び出して、\n",
    "商品名が正しくCustomer、Employee のインスタンスに伝わっていることを確認します。モジュー\n",
    "ルの最後に、トップレベルで使用された際に実行されるコードを入れておけば、テストのたびにイ\n",
    "ンスタンス作成のコードやメソッド呼び出しのコードを入力する、という手間が省けます（これに\n",
    "は__name__属性を使用します。）。ここでは、プログラムを、Customer のメソッドからEmployeeメソッド\n",
    "が呼び出される、という構造にします。つまり、「顧客」が注文を出すと、それを「従業員」が受ける、という\n",
    "「顧客主体」の構造にするわけです。これを、「従業員」が注文を聞くと、それに「顧客」が応える、という\n",
    "「従業員主体」の構造にするとしたら、プログラムのコードはどのように変える必要があるかを考えてみてください。"
   ]
  }
 ],
 "metadata": {
  "language_info": {
   "name": "python"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
